<div class="hand">
  <% hidden = defined?(hidden) ? hidden : false %>
  <% read_only = defined?(read_only) ? read_only : hidden %>
  <% interactive = defined?(interactive) ? interactive : false %>

  <div class="player_space_header">
    <div class="player_points"><%= points_string(player.total_score) %></div>
  </div>

  <% player.hand.each do |card| %>
    <% dynamic = !hidden && !read_only && @game_state.valid_play?(player, card) || interactive %>
    <a class="<%= hand_card_css_class(dynamic: dynamic) %>"
       href="<%=url_for(
       controller:'operations',
       action: 'new',
       game_id: @game.id,
       player_id: player.player.id,
       operation_type: 'play_card',
       suit: card.suit,
       rank: card.rank,
       only_path: true)%>">
       <!-- href="<%= @game.card_link_url(card, operation_type, read_only: !dynamic) %>"> -->
       <%= unicode_card(card) if !hidden %>
       <%= unicode_card_back  if  hidden %>
    </a>
  <%end%>
</div>
<!-- TODO move this stuff into model so there is fewer logical statements in here -->
